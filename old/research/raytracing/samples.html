<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Raytracing samples</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</head>

<body>
<h1 align="center"><a name="top"></a>Raytracing samples</h1>
<p align="center">see <a href="raytrace/index.html">http://www.hamline.edu/~arundquist/webMMA/research/raytracing/raytrace/</a></p>
<p align="left">Last Modified: 
  <!-- #BeginDate format:Am1 -->January 4, 2005<!-- #EndDate -->
</p>
<p align="left">This page has the following elements:</p>
<ul>
  <li><a href="#generaldescription">General description of webMathematica-based 
    ray tracing</a></li>
  <li><a href="#opticslist">Explanation of optics functions</a></li>
  <li><a href="#tips">Tips and hints</a></li>
  <li><a href="#examples">Examples</a> 
    <ul>
      <li><a href="#simpletelescope">Simple telescope</a></li>
      <li><a href="#compressor">Compressor</a></li>
      <li><a href="#stretcher">Stetcher</a></li>
      <li><a href="#heterodyne">Heterodyne Stimulated Raman Setup</a></li>
    </ul>
  </li>
</ul>
<hr>
<h2 align="center"><a name="generaldescription"></a>General description</h2>
<p align="left">The <a href="raytrace">raytracing page</a> takes an ordered list 
  of optics along with a starting point and both calculates and plots the optical 
  path for a variety of initial rays. The initial rays range from a single ray 
  to a full cone or full cylinder centered on the initial direction. Each ray 
  can represent either a single wavelength or a range of wavelengths (note that 
  wavelengths only matter if one uses a grating or dispersive element).</p>
<p align="left">If it is determined that a ray will not strike the next optic, 
  the ray is terminated at the previous optic.</p>
<p align="left">For the plane mirrors, the plane is considered infinitely large. 
  For the curved mirrors, the mirror is comprised of the entire sphere.</p>
<p align="left">For the gratings, diffraction theory is used to determine the 
  outgoing ray direction (even out-of-plane).</p>
<p align="left"><a href="#top">back to top</a></p>
<hr>
<h2 align="center"><a name="opticslist"></a>Optics functions</h2>
<p align="left">At this time, the types of optics available are:</p>
<table width="100%" border="1">
  <tr> 
    <td><div align="center"><strong>Optic</strong></div></td>
    <td><div align="center"><strong>Syntax</strong></div></td>
    <td><div align="center"><strong>Desription</strong></div></td>
    <td><div align="center"><strong>Examples</strong></div></td>
  </tr>
  <tr> 
    <td>plane mirror</td>
    <td>planemirror[point_on_mirror, normal_to_mirror];</td>
    <td>An infinite plane representing a flat mirror with one point on the plane 
      given along with the normal (this should be normalized)</td>
    <td><p>xy plane facing +z direction: planemirror[{0,0,0}, {0,0,1}];</p>
      <p>top of periscope: planemirror[{0,0,5},norm[{1,0,-1}]];</p></td>
  </tr>
  <tr> 
    <td>curved mirror (a)</td>
    <td>curvedmirror[point_on_mirror, normal_at_that_point_, Radius_of_curvature, 
      concave(True)/convex(False)]; </td>
    <td>The inner (outer) surface of a perfect sphere if convex (concave). Again 
      the normal should be normalized</td>
    <td><p>Spherical mirror 1 m along x-axis with focal length 1 m: curvedmirror[{1,0,0}, 
        {-1,0,0}, 2, True];</p>
      <p>Convex mirror with center at origin: curvedmirror[{0, R, 0}, {0, -1, 
        0}, R, False];</p></td>
  </tr>
  <tr> 
    <td>curved mirror (b)</td>
    <td>curvedmirrorcenter[location_of_center, Radius of curvature, concave(True)/convex(False)];</td>
    <td>For use when the coordinates of the center of curvature are known (no 
      need to specify a normal vector). Good for final optics to catch all outgoing 
      beams. </td>
    <td><p>Spherical mirror 1 m along x-axis with focal length 1 m: curvedmirrorcenter[{-1,0,0}, 
        2, True];</p>
      <p>Convex mirror with center at origin: curvedmirrorcenter[{0,0,0}, R, False];</p></td>
  </tr>
  <tr>
    <td>symmetric lens</td>
    <td>SymmetricLens[focal_length, height, center_coordinates, normal_of_first_surface, 
      index_of_refraction_or_glass_type, design_wavelength_in_microns]</td>
    <td>A positive lens that is curved on both sides. If you enter a number for 
      index_of_refraction, it will not exhibit dispersion. Good choices for glass_type 
      are &quot;BK7&quot; and &quot;fused_silica&quot;</td>
    <td>1 meter focal length, 1&quot; lens: SymmetricLens[1, .0254, {0,0,0}, {-1,0,0}, 
      BK7, 0.632]</td>
  </tr>
  <tr> 
    <td>transmission grating</td>
    <td>transmissiongrating[point_on_grating, normal_to_grating_facing_incoming_beam, 
      vector_parallel_to_grooves, diffraction_order, groove_spacing];</td>
    <td>Note that both the normal and the groove vector need to be normalized 
      (you can always use norm[vector]). The units of the groove spacing should 
      be in microns.</td>
    <td><p>grating in x-y plane with grooves line at 45 degrees wrt x-axis, facing 
        in +z direction with 1200 grooves/mm: </p>
      <p>transmissiongrating[{0,0,0}, {0,0,1}, norm[{1,1,0}], 1, 1000./1200];</p></td>
  </tr>
  <tr> 
    <td>reflection grating</td>
    <td>grating[point_on_grating, normal_to_grating, vector_parallel_to_grooves, 
      diffraction_order, groove_spacing];</td>
    <td>see above</td>
    <td><p>grating in y-z plane facing -x with grooves along z-axis and a groove 
        spacing of 10 microns: </p>
      <p>grating[{0,0,0}, {-1,0,0}, {0,0,1}, 1, 10];</p></td>
  </tr>
</table>
<a href="#top">back to top</a>
<hr>
<h2 align="center"><a name="tips"></a>Tips and Hints</h2>
<ul>
  <li>You can use the optics description textbox to parametrize anything on the 
    page. For example, if you are using a curved mirror and you think you'll vary 
    its radius of curvature, define R and then use it: 
    <blockquote> 
      <p>R=1.0;<br>
        cm=curvedmirrorcenter[{0,0,0}, R, True];</p>
    </blockquote>
  </li>
  <li>You can also use that textbox to define complicated functions for the analytical 
    plot <a href="#compressor">(see the compressor example below)</a></li>
  <li>Try to make sure that all numbers are given as reals: 1.0 instead of 1. 
    This should really only matter for those vectors that will be normalized. 
    For example, the following leads to an error: planemirror[{0,0,0}, norm[{1,0,1}]; 
    but this doesn't: planemirror[{0,0,0}, norm[{1.,0,1.}];</li>
</ul>
<a href="#top">back to top</a>
<hr>
<h2 align="center"><strong><a name="examples"></a>Examples</strong></h2>
<p align="left">Below are examples from the raytracing page. You can cut and paste 
  from this page to see for yourself at the above site.</p>
<hr>
<p><a name="simpletelescope"></a>Simple Telescope:</p>
<p><img src="raytrace/gifs/simpletelescopemain.gif" width="253" height="1058"></p>
<p>Optics description: <br>
  R1=0.25;<br>
  R2=2.;<br>
  z1=(R2-R1)/2;<br>
  cm = curvedmirrorcenter[{0, 0, z1}, R1, True];<br>
  cm2 = curvedmirrorcenter[{0, 0, R2}, R2, True];<br>
  end=planemirror[{0,0,-.2},{0,0,1}];</p>
<p><br>
  Optics order:<br>
  cm2, cm, end</p>
<p><br>
  Initial point: 0,.1,2<br>
  Initial direction: 0,-.1,-2</p>
<p><br>
  Wavelengths: <br>
  low: 0.8<br>
  high: 0.8<br>
  step size: 0.01</p>
<p><br>
  initial ray(s): <br>
  Hollow cylinder<br>
  width of cone/cylinder: .1<br>
  number of rays around: 16<br>
  number of interior rays: 8<br>
  Analytical function: none used </p>
<p>Beam on last optic:</p>
<p><img src="raytrace/gifs/simpletelescopelast.gif" width="288" height="288"></p>
<p><a href="#top">back to top</a></p>
<hr>
<p><a name="compressor"></a>Compressor:</p>
<p><img src="raytrace/gifs/compressmain.gif" width="432" height="224"></p>
<p>Optics description: <br>
  L=.32;<br>
  d=1000./1200;<br>
  ngrat=norm[{1.,-1.,0}];<br>
  a=.1;<br>
  offroof=0.001;<br>
  grat1=grating[{0,0,0},ngrat,{0,0,1.},-1,d];<br>
  grat2=grating[L ngrat,-ngrat,{0,0,1.},-1,d];<br>
  roof1=planemirror[{-a,0,-.01},norm[{1.,0,-1.}]];<br>
  roof2=planemirror[{-a,0,-.01},norm[{1.,0,1.+offroof}]];<br>
  endmirror=planemirror[{.2,0,0},-norm[{1.,0,offroof}]];<br>
  m=-1.;<br>
  theta1 = Pi/4;<br>
  theta2[lambda_] := ArcSin[-m lambda/d - Sin[theta1]];<br>
  l1[lambda_] := L/Cos[theta2[lambda]];<br>
  l2[lambda_] := l1[lambda] Cos[theta1 - theta2[lambda]];<br>
  ltotal[lambda_] :=2 (l1[lambda] + l2[lambda]);</p>
<p><br>
  Optics order:<br>
  grat1, grat2, roof1,roof2, grat2, grat1, endmirror</p>
<p><br>
  Initial point: .2,0,0<br>
  Initial direction: -1,0,0</p>
<p><br>
  Wavelengths: <br>
  low: .7<br>
  high: .9<br>
  step size: .01</p>
<p><br>
  initial ray(s): <br>
  Single ray<br>
  parameter 1 (width of cone/cylinder): .02<br>
  parameter 2 (number of rays around): 2<br>
  parameter 3 (number of interior rays): 8</p>
<p><br>
  Analytical function: ltotal[lambda] subtracted </p>
<p><br>
  Path Lengths: <br>
  <img src="raytrace/gifs/compresspath.gif" width="288" height="288"><br>
  Beam on last optic: <br>
  <img src="raytrace/gifs/compresslast.gif" width="288" height="288"> </p>
<p><a href="#top">back to top</a></p>
<hr>
<p><a name="stretcher" id="stretcher"></a>Stetcher</p>
<p><img src="raytrace/gifs/stretchmain.gif" width="432" height="238"></p>
<p>Optics description: <br>
  R=1.0;<br>
  d=1000./1200;<br>
  shift=0.2;<br>
  retroshift=R/4;<br>
  grat=grating[{R/2-shift,0,0},norm[{-1,-.55,0}],{0,0,1},1,d];<br>
  cm=curvedmirror[{0,0,0},{1,0,0},R,True];<br>
  fold=planemirror[{R/2,0,0},{-1,0,0}];<br>
  retro=planemirror[{R/2-shift-retroshift,0,0},norm[{1,0,0.1}]];<br>
  end=planemirror[{-shift,0,0},norm[{1,0,0.1}]];</p>
<p><br>
  Optics order:<br>
  grat, cm, fold, cm, grat, retro, grat, cm, fold, cm, grat, end</p>
<p><br>
  Initial point: -shift,0,0<br>
  Initial direction: 1,0,.1</p>
<p><br>
  Wavelengths: <br>
  low: 0.7<br>
  high: 0.9<br>
  step size: 0.01</p>
<p><br>
  initial ray(s): <br>
  Single ray<br>
  width of cone/cylinder: .1<br>
  number of rays around: 16<br>
  number of interior rays: 8</p>
<p><br>
  Analytical function: none used </p>
<p><br>
  Path Lengths: </p>
<p><img src="raytrace/gifs/stretchpath.gif" width="288" height="288"></p>
<p>Beam on last optic:</p>
<p><img src="raytrace/gifs/stretchlast.gif" width="288" height="288"></p>
<p><a href="#top">back to top</a></p>
<hr>
<p><a name="heterodyne"></a>In phase heterodyne Stimulated Raman setup</p>
<p><img src="raytrace/gifs/heterodynemain.gif" width="432" height="372"></p>
<p>Optics description: <br>
  d=1000./80;<br>
  s=.05;<br>
  cm1=curvedmirror[{-1,0,0},norm[{1,0,-s}],2,True];<br>
  grat1=transmissiongrating[{0,0,-2 s},norm[{-1,0,s}],norm[{s,0,-1}], 1,d];<br>
  cm2=curvedmirror[{1,0,-4 s}, norm[{-1.,0,0}], 1, True];<br>
  cm3=curvedmirror[{-1,0,-8 s}, {1,0,0}, 1, True];<br>
  pm=planemirror[{-.5, 0, -9 s}, norm[{-Tan[(Pi/2+ArcTan[2 s])/2],0,-1.}]];<br>
  grat2=transmissiongrating[{-.5,0,-9s - (1 - Sqrt[0.5^2 + s^2])},{0,0,1},{1,0,0},1,d];<br>
  end=planemirror[{-.5,0,-25 s},{0,0,1}];</p>
<p><br>
  Optics order:<br>
  cm1, grat1, cm2, cm3, pm, grat2, end</p>
<p><br>
  Initial point: 1,0,0<br>
  Initial direction: -1, 0, 0</p>
<p><br>
  Wavelengths: <br>
  low: -0.8<br>
  high: 0.8<br>
  step size: 1.6</p>
<p><br>
  initial ray(s): <br>
  Hollow cylinder<br>
  width of cone/cylinder: .04<br>
  number of rays around: 2<br>
  number of interior rays: 8</p>
<p><br>
  Analytical function: none used </p>
<p><a href="#top">back to top</a></p>
</body>
</html>
